<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>企业级 GPU 算力储备监测看板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- 引入数据文件 -->
    <script src="data.js"></script>
    <style>
        body { background-color: #f1f5f9; font-family: 'Inter', system-ui, sans-serif; }
        .glass-card { background: white; border: 1px solid #e2e8f0; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        .table-row:nth-child(even) { background-color: #f8fafc; }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- 头部 -->
        <header class="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
            <div>
                <h1 class="text-3xl font-bold text-slate-900 flex items-center gap-3">
                    <i class="ph-fill ph-microchip text-indigo-600"></i> 全球 AI 算力储备监测
                </h1>
                <p class="text-slate-500 mt-1 text-sm">基于公开市场信息、财报及供应链推演模型 | 每日 T+1 更新</p>
            </div>
            <div class="flex items-center gap-2 text-xs bg-white px-3 py-1.5 rounded-full border border-slate-200 shadow-sm">
                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                上次抓取: <span id="update-time" class="font-mono text-slate-600">--</span>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- 左侧：核心数据表 (占据 8 列) -->
            <div class="lg:col-span-8 space-y-8">
                
                <!-- 1. 云厂商/互联网巨头 -->
                <div class="glass-card overflow-hidden">
                    <div class="px-6 py-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                        <h2 class="font-bold text-slate-800 flex items-center gap-2">
                            <i class="ph-fill ph-cloud text-blue-500"></i> 云厂商/互联网 GPU 存量估测
                        </h2>
                        <span class="text-xs text-slate-400 bg-slate-200 px-2 py-0.5 rounded">单位：万张 (等效 A100/H100)</span>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead class="text-xs text-slate-500 uppercase bg-slate-50 border-b">
                                <tr>
                                    <th class="px-6 py-3">厂商</th>
                                    <th class="px-6 py-3 text-right">预估卡数</th>
                                    <th class="px-6 py-3">主要架构</th>
                                    <th class="px-6 py-3">趋势信号</th>
                                </tr>
                            </thead>
                            <tbody id="enterprise-table" class="text-slate-700">
                                <!-- JS 注入数据 -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 2. 自动驾驶 -->
                <div class="glass-card overflow-hidden">
                    <div class="px-6 py-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                        <h2 class="font-bold text-slate-800 flex items-center gap-2">
                            <i class="ph-fill ph-car text-orange-500"></i> 自动驾驶智算中心规模
                        </h2>
                        <span class="text-xs text-slate-400 bg-slate-200 px-2 py-0.5 rounded">单位：EFLOPS (FP16) / 卡数</span>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead class="text-xs text-slate-500 uppercase bg-slate-50 border-b">
                                <tr>
                                    <th class="px-6 py-3">车企/品牌</th>
                                    <th class="px-6 py-3 text-right">算力规模/卡数</th>
                                    <th class="px-6 py-3">自研芯片/平台</th>
                                    <th class="px-6 py-3">最新动态</th>
                                </tr>
                            </thead>
                            <tbody id="auto-table" class="text-slate-700">
                                <!-- JS 注入数据 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 右侧：实时情报 (占据 4 列) -->
            <div class="lg:col-span-4">
                <div class="glass-card h-full flex flex-col" style="max-height: 800px;">
                    <div class="px-5 py-4 border-b border-slate-100 flex justify-between items-center sticky top-0 bg-white z-10">
                        <h3 class="font-bold text-slate-800 flex items-center gap-2">
                            <i class="ph-fill ph-lightning text-yellow-500"></i> 最新行业动态
                        </h3>
                    </div>
                    <div id="news-container" class="overflow-y-auto p-4 space-y-4 flex-1">
                        <!-- JS 注入新闻 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 渲染函数
        function renderDashboard() {
            if (typeof gpuData === 'undefined') return;

            // 1. 更新时间
            document.getElementById('update-time').innerText = gpuData.updateTime;

            // 2. 渲染企业表
            const entTable = document.getElementById('enterprise-table');
            let entHtml = '';
            gpuData.enterprise.forEach(item => {
                entHtml += `
                <tr class="table-row border-b border-slate-50 hover:bg-slate-100 transition-colors">
                    <td class="px-6 py-4 font-medium text-slate-900 flex items-center gap-2">
                        ${item.name}
                        ${item.isHBM ? '<span class="text-[10px] bg-red-100 text-red-600 px-1 rounded">HBM紧缺</span>' : ''}
                    </td>
                    <td class="px-6 py-4 text-right font-mono font-bold text-indigo-600">${item.count}</td>
                    <td class="px-6 py-4 text-xs text-slate-500">${item.chips}</td>
                    <td class="px-6 py-4">
                        <span class="text-xs px-2 py-1 rounded-full ${item.trend.includes('↑') ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600'}">
                            ${item.trend}
                        </span>
                    </td>
                </tr>`;
            });
            entTable.innerHTML = entHtml;

            // 3. 渲染自动驾驶表
            const autoTable = document.getElementById('auto-table');
            let autoHtml = '';
            gpuData.auto.forEach(item => {
                autoHtml += `
                <tr class="table-row border-b border-slate-50 hover:bg-slate-100 transition-colors">
                    <td class="px-6 py-4 font-medium text-slate-900">${item.name}</td>
                    <td class="px-6 py-4 text-right font-mono font-bold text-orange-600">${item.count}</td>
                    <td class="px-6 py-4 text-xs text-slate-500">${item.chipType}</td>
                    <td class="px-6 py-4 text-xs text-slate-500 truncate max-w-[150px]" title="${item.news}">
                        ${item.news}
                    </td>
                </tr>`;
            });
            autoTable.innerHTML = autoHtml;

            // 4. 渲染新闻
            const newsBox = document.getElementById('news-container');
            let newsHtml = '';
            gpuData.news.forEach(news => {
                newsHtml += `
                <a href="${news.url}" target="_blank" class="block group">
                    <div class="flex justify-between items-start mb-1">
                        <span class="text-[10px] font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded">${news.source}</span>
                        <span class="text-[10px] text-slate-400">${news.date}</span>
                    </div>
                    <h4 class="text-sm font-medium text-slate-800 group-hover:text-blue-600 transition-colors leading-snug mb-1">
                        ${news.title}
                    </h4>
                </a>
                <hr class="border-slate-100 mt-3"/>
                `;
            });
            newsBox.innerHTML = newsHtml;
        }

        renderDashboard();
    </script>
</body>
</html>
